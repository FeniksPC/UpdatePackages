jQuery.Class("Settings_CustomView_Sorting_Js",{},{formElement:false,registerButtonsEvent:function(){var b=this;var a=this.getForm();a.find(".js-clear").on("click",function(d){var c=jQuery(d.currentTarget);c.closest(".js-sort-container").find('[name="defaultOrderBy"]').val("").trigger("change")});a.find(".js-sort-order-button").on("click",function(d){var c=jQuery(d.currentTarget);c.find("[data-fa-i2svg]").each(function(g,f){if(jQuery(this).hasClass("d-none")){jQuery(this).removeClass("d-none");a.find('[name="sortOrder"]').val(jQuery(this).data("val"))}else{jQuery(this).addClass("d-none")}})});a.on("submit",function(d){var c=jQuery(d.currentTarget);b.saveSorting(c);d.preventDefault()})},saveSorting:function(b){var a=$.progressIndicator({message:app.vtranslate("JS_SAVE_LOADER_INFO"),blockInfo:{enabled:true}});var c=b.serializeFormData();var d={cvid:c.cvid,name:"sort",value:c.defaultOrderBy?c.defaultOrderBy+","+c.sortOrder:""};app.saveAjax("updateField",{},d).then(function(e){app.hideModalWindow();if(e.success){Vtiger_Helper_Js.showPnotify({text:e.result.message,type:"success"})}a.progressIndicator({mode:"hide"})})},getForm:function(){if(this.formElement===false){this.setForm(jQuery("#js-sorting-filter"))}return this.formElement},setForm:function(a){this.formElement=a;return this},registerEvents:function(){this.registerButtonsEvent()}});jQuery(document).ready(function(b){var a=new Settings_CustomView_Sorting_Js();a.registerEvents()});