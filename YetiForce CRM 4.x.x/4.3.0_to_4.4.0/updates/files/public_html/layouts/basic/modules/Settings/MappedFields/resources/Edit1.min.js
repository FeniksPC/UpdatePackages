Settings_MappedFields_Edit_Js("Settings_MappedFields_Edit1_Js",{},{init:function(){this.initialize()},getContainer:function(){return this.step1Container},setContainer:function(element){this.step1Container=element;return this},initialize:function(container){if(typeof container==="undefined"){container=jQuery("#mf_step1")}if(container.is("#mf_step1")){this.setContainer(container)}else{this.setContainer(jQuery("#mf_step1"))}},submit:function(){var aDeferred=jQuery.Deferred();var form=this.getContainer();var formData=form.serializeFormData();formData["async"]=false;var saveData=form.serializeFormData();saveData["step"]=1;saveData["async"]=false;if(this.checkModulesName()){var progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});app.saveAjax("step1",saveData).done(function(data){if(data.success==true){if(!data.result.id&&data.result.message){Settings_Vtiger_Index_Js.showMessage({text:data.result.message,type:"error"});aDeferred.resolve(false);progressIndicatorElement.progressIndicator({mode:"hide"});return false}Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_MF_SAVED_SUCCESSFULLY")});var mfRecordElement=jQuery('[name="record"]',form);if(mfRecordElement.val()===""){mfRecordElement.val(data.result.id);formData["record"]=data.result.id}formData["record"]=data.result.id;AppConnector.request(formData).done(function(data){form.hide();progressIndicatorElement.progressIndicator({mode:"hide"});aDeferred.resolve(data)})}})}return aDeferred.promise()},registerCancelStepClickEvent:function(form){jQuery("button.cancelLink",form).on("click",function(){window.history.back()})},checkModulesName:function(){var sourceModule=jQuery('[name="tabid"]').val();var targetModule=jQuery('[name="reltabid"]').val();if(sourceModule==targetModule){var notificationParams={text:app.vtranslate("JS_YOU_CAN_NOT_SELECT_THE_SAME_MODULES"),type:"error"};Settings_Vtiger_Index_Js.showMessage(notificationParams);return false}return true},registerEvents:function(){var container=this.getContainer();container.find('[type="submit"]').removeAttr("disabled");var opts=app.validationEngineOptions;opts["onValidationComplete"]=function(form,valid){return valid};opts["promptPosition"]="bottomRight";container.validationEngine(opts);this.registerCancelStepClickEvent(container)}});