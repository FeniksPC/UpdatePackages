Vtiger_Edit_Js("Contacts_Edit_Js",{},{checkForPortalUser:function(form){var element=jQuery('[name="portal"]',form);var response=element.is(":checked");var primaryEmailField=jQuery('[name="email"]');var primaryEmailValue=primaryEmailField.val();if(response){if(primaryEmailField.length==0){Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_PRIMARY_EMAIL_FIELD_DOES_NOT_EXISTS"));return false}if(primaryEmailValue==""){Vtiger_Helper_Js.showPnotify(app.vtranslate("JS_PLEASE_ENTER_PRIMARY_EMAIL_VALUE_TO_ENABLE_PORTAL_USER"));return false}}return true},registerRecordPreSaveEvent:function(form){var thisInstance=this;if(typeof form==="undefined"){form=this.getForm()}form.on(Vtiger_Edit_Js.recordPreSave,function(e,data){var result=thisInstance.checkForPortalUser(form);if(!result){e.preventDefault()}})},registerBasicEvents:function(container){this._super(container);this.registerRecordPreSaveEvent(container)}});