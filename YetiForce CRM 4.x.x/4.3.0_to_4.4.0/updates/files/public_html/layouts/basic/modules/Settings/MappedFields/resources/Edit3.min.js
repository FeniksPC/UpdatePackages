Settings_MappedFields_Edit_Js("Settings_MappedFields_Edit3_Js",{},{step3Container:false,advanceFilterInstance:false,init:function(){this.initialize()},getContainer:function(){return this.step3Container},setContainer:function(element){this.step3Container=element;return this},initialize:function(container){if(typeof container==="undefined"){container=jQuery("#mf_step3")}if(container.is("#mf_step3")){this.setContainer(container)}else{this.setContainer(jQuery("#mf_step3"))}},calculateValues:function(){var enableFilterElement=jQuery("#enableAdvanceFilters");if(enableFilterElement.length>0&&enableFilterElement.is(":checked")==false){jQuery("#advanced_filter").val(jQuery("#olderConditions").val())}else{jQuery('[name="filtersavedinnew"]').val("6");var advfilterlist=this.advanceFilterInstance.getValues();jQuery("#advanced_filter").val(JSON.stringify(advfilterlist))}},submit:function(){var aDeferred=jQuery.Deferred();this.calculateValues();var form=this.getContainer();var formData=form.serializeFormData();var progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});var saveData=form.serializeFormData();saveData["step"]=3;app.saveAjax("step1",saveData).then(function(data){if(data.success==true){Settings_Vtiger_Index_Js.showMessage({text:app.vtranslate("JS_MF_SAVED_SUCCESSFULLY")});AppConnector.request(formData).then(function(data){form.hide();progressIndicatorElement.progressIndicator({mode:"hide"});aDeferred.resolve(data)},function(error,err){app.errorLog(error,err)})}});return aDeferred.promise()},registerCancelStepClickEvent:function(form){jQuery("button.cancelLink",form).on("click",function(){window.history.back()})},registerEvents:function(){var container=this.getContainer();var opts=app.validationEngineOptions;opts["onValidationComplete"]=function(form,valid){return valid};opts["promptPosition"]="bottomRight";container.validationEngine(opts);this.registerCancelStepClickEvent(container);this.advanceFilterInstance=Vtiger_AdvanceFilter_Js.getInstance(jQuery("#advanceFilterContainer",container));App.Fields.Picklist.changeSelectElementView(container)}});