
Settings_Vtiger_List_Js("Settings_Workflows_List_Js", {triggerCreate:function(a){var b = jQuery("#moduleFilter").val(); if (b.length > 0){a += "&source_module=" + b}window.location.href = a}, setChangeStatusTasks:function(g, c, b){var f = jQuery(g); var a = jQuery(g).closest("tr"); var d = app.vtranslate("LBL_STATUS_CONFIRMATION"); Vtiger_Helper_Js.showConfirmationBox({message:d}).then(function(k){var i = app.getModuleName(); var h = {module:i, action:"TaskAjax", mode:"changeStatusAllTasks", record:c, status:b, parent:app.getParentModuleName()}; var l = app.vtranslate("JS_TASKS_STATUS_GETTING_CHANGED"); var j = jQuery.progressIndicator({message:l, position:"html", blockInfo:{enabled:true}}); AppConnector.request(h).then(function(n){j.progressIndicator({mode:"hide"}); if (n.success){var m = n.result.count; var e = a.find('[data-name="active_tasks"]'); f.hide(); if (b){e.html("&nbsp;" + m); f.closest("td").find(".deactiveTasks").show()} else{e.html("&nbsp;0"); f.closest("td").find(".activeTasks").show()}} else{var o = {text:app.vtranslate(n.error.message), title:app.vtranslate("JS_LBL_PERMISSION")}; Vtiger_Helper_Js.showPnotify(o)}}, function(e, m){})}, function(e, h){})}, }, {registerFilterChangeEvent:function(){var a = this; jQuery("#moduleFilter").on("change", function(b){jQuery("#pageNumber").val("1"); jQuery("#pageToJump").val("1"); jQuery("#orderBy").val(""); jQuery("#sortOrder").val(""); var c = {module:app.getModuleName(), parent:app.getParentModuleName(), sourceModule:jQuery(b.currentTarget).val()}; jQuery("#recordsCount").val(""); jQuery("#totalPageCount").text(""); a.getListViewRecords(c).then(function(d){a.updatePagination()})})}, registerRowClickEvent:function(){var a = this.getListViewContentContainer(); a.on("click", ".listViewEntries", function(c){var b = jQuery(c.currentTarget).find("[data-fa-i2svg]").closest("a").attr("href"); window.location.href = b})}, getDefaultParams:function(){var a = jQuery("#pageNumber").val(); var b = app.getModuleName(); var c = app.getParentModuleName(); var d = {module:b, parent:c, page:a, view:"List", sourceModule:jQuery("#moduleFilter").val()}; return d}, registerImportTemplate:function(){jQuery("#importButton").on("click", function(){window.location.href = jQuery(this).data("url")})}, registerEvents:function(){this._super(); this.registerFilterChangeEvent(); this.registerImportTemplate()}});
