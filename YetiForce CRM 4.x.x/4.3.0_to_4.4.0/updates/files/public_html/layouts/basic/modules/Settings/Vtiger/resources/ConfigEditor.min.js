jQuery.Class("Settings_Vtiger_ConfigEditor_Js",{},{saveConfigEditor:function(form){var aDeferred=jQuery.Deferred();var data=form.serializeFormData();var updatedFields={};jQuery.each(data,function(key,value){if(key==="__vtrftk"){return}updatedFields[key]=value});var params={module:app.getModuleName(),parent:app.getParentModuleName(),action:"ConfigEditorSaveAjax",updatedFields:JSON.stringify(updatedFields)};AppConnector.request(params).then(function(data){aDeferred.resolve(data)},function(error,err){aDeferred.reject()});return aDeferred.promise()},loadContents:function(url){var aDeferred=jQuery.Deferred();AppConnector.requestPjax(url).then(function(data){aDeferred.resolve(data)},function(error,err){aDeferred.reject()});return aDeferred.promise()},registerEditViewEvents:function(){var thisInstance=this;var form=jQuery("#ConfigEditorForm");var detailUrl=form.data("detailUrl");App.Fields.Picklist.showSelect2ElementView(form.find("select.select2"),{dropdownCss:{"z-index":0}});var params=app.validationEngineOptions;params.onValidationComplete=function(form,valid){if(valid){var progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});thisInstance.saveConfigEditor(form).then(function(data){var params={};if(data["success"]){params["text"]=app.vtranslate("JS_CONFIGURATION_DETAILS_SAVED");thisInstance.loadContents(detailUrl).then(function(data){progressIndicatorElement.progressIndicator({mode:"hide"});jQuery(".contentsDiv").html(data);thisInstance.registerDetailViewEvents()})}else{progressIndicatorElement.progressIndicator({mode:"hide"});params["text"]=data["error"]["message"];params["type"]="error"}Settings_Vtiger_Index_Js.showMessage(params)},function(error,err){progressIndicatorElement.progressIndicator({mode:"hide"})});return valid}};form.validationEngine(params);form.on("submit",function(e){e.preventDefault()});var cancelLink=form.find(".cancelLink");cancelLink.on("click",function(){var progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});thisInstance.loadContents(detailUrl).then(function(data){progressIndicatorElement.progressIndicator({mode:"hide"});jQuery(".contentsDiv").html(data);thisInstance.registerDetailViewEvents()})})},registerDetailViewEvents:function(){var thisInstance=this;var container=jQuery("#ConfigEditorDetails");var editButton=container.find(".editButton");editButton.on("click",function(){var url=editButton.data("url");var progressIndicatorElement=jQuery.progressIndicator({position:"html",blockInfo:{enabled:true}});thisInstance.loadContents(url).then(function(data){progressIndicatorElement.progressIndicator({mode:"hide"});jQuery(".contentsDiv").html(data);thisInstance.registerEditViewEvents()},function(error,err){progressIndicatorElement.progressIndicator({mode:"hide"})})})},registerEvents:function(){if(jQuery("#ConfigEditorDetails").length>0){this.registerDetailViewEvents()}else{this.registerEditViewEvents()}}});jQuery(document).ready(function(e){var tacInstance=new Settings_Vtiger_ConfigEditor_Js;tacInstance.registerEvents()});Vtiger_WholeNumberGreaterThanZero_Validator_Js("Vtiger_NumberRange5_Validator_Js",{invokeValidation:function(field,rules,i,options){var rangeInstance=new Vtiger_NumberRange5_Validator_Js;rangeInstance.setElement(field);var response=rangeInstance.validate();if(response!=true){return rangeInstance.getError()}}},{validate:function(){var response=this._super();if(response!=true){return response}else{var fieldValue=this.getFieldValue();if(fieldValue<1||fieldValue>5){var errorInfo=app.vtranslate("JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO5");this.setError(errorInfo);return false}return true}}});Vtiger_WholeNumberGreaterThanZero_Validator_Js("Vtiger_NumberRange2_Validator_Js",{invokeValidation:function(field,rules,i,options){var rangeInstance=new Vtiger_NumberRange5_Validator_Js;rangeInstance.setElement(field);var response=rangeInstance.validate();if(response!=true){return rangeInstance.getError()}}},{validate:function(){var response=this._super();if(response!=true){return response}else{var fieldValue=this.getFieldValue();if(fieldValue<1||fieldValue>2){var errorInfo=app.vtranslate("JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO2");this.setError(errorInfo);return false}return true}}});Vtiger_WholeNumberGreaterThanZero_Validator_Js("Vtiger_NumberRange100_Validator_Js",{invokeValidation:function(field,rules,i,options){var rangeInstance=new Vtiger_NumberRange100_Validator_Js;rangeInstance.setElement(field);var response=rangeInstance.validate();if(response!=true){return rangeInstance.getError()}}},{validate:function(){var response=this._super();if(response!=true){return response}else{var fieldValue=this.getFieldValue();if(fieldValue<1||fieldValue>100){var errorInfo=app.vtranslate("JS_PLEASE_ENTER_NUMBER_IN_RANGE_1TO100");this.setError(errorInfo);return false}return true}}});