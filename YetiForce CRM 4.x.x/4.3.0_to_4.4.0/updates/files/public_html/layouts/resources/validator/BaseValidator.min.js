jQuery.Class("Vtiger_Base_Validator_Js",{moduleName:false,invokeValidation:function(field,rules,i,options){if(typeof options!=="undefined"){if(options.isError==true){return}}var listOfValidators=Vtiger_Base_Validator_Js.getValidator(field);for(var i=0;i<listOfValidators.length;i++){var validatorList=listOfValidators[i];var validatorName=validatorList.name;var validatorInstance=new validatorName;validatorInstance.setElement(field);if(validatorList.hasOwnProperty("params")){var result=validatorInstance.validate(validatorList.params)}else{var result=validatorInstance.validate()}if(!result){return validatorInstance.getError()}}},getValidator:function(field){var listOfValidators=[];var fieldData=field.data();var fieldInfo=fieldData.fieldinfo;if(typeof fieldInfo=="string"){fieldInfo=JSON.parse(fieldInfo)}var dataValidator="validator";var moduleEle=field.closest("form").find('[name="module"]');if(Vtiger_Base_Validator_Js.moduleName==false&&moduleEle.length>0){Vtiger_Base_Validator_Js.moduleName=moduleEle.val()}var fieldInstance=Vtiger_Field_Js.getInstance(fieldInfo);var validatorsOfType=Vtiger_Base_Validator_Js.getValidatorsFromFieldType(fieldInstance);for(var key in validatorsOfType){if(!validatorsOfType.hasOwnProperty(key)){continue}var value=validatorsOfType[key];if(value!=""){var tempValidator={name:value};listOfValidators.push(tempValidator)}}if(fieldData.hasOwnProperty(dataValidator)){var specialValidators=fieldData[dataValidator];for(var key in specialValidators){if(!specialValidators.hasOwnProperty(key)){continue}var specialValidator=specialValidators[key];var tempSpecialValidator=jQuery.extend({},specialValidator);var validatorOfNames=Vtiger_Base_Validator_Js.getValidatorClassName(specialValidator.name);if(validatorOfNames!=""){tempSpecialValidator.name=validatorOfNames;if(!jQuery.isEmptyObject(tempSpecialValidator)){listOfValidators.push(tempSpecialValidator)}}}}return listOfValidators},getValidatorsFromFieldType:function(fieldInstance){var fieldType=fieldInstance.getType();var validatorsOfType=[];fieldType=fieldType.charAt(0).toUpperCase()+fieldType.slice(1).toLowerCase();validatorsOfType.push(Vtiger_Base_Validator_Js.getValidatorClassName(fieldType));return validatorsOfType},getValidatorClassName:function(validatorName){var validatorsOfType="";var className=Vtiger_Base_Validator_Js.getClassName(validatorName);var fallBackClassName=Vtiger_Base_Validator_Js.getFallBackClassName(validatorName);if(typeof window[className]!=="undefined"){validatorsOfType=window[className]}else if(typeof window[fallBackClassName]!=="undefined"){validatorsOfType=window[fallBackClassName]}return validatorsOfType},getClassName:function(validatorName){if(Vtiger_Base_Validator_Js.moduleName!=false){var moduleName=Vtiger_Base_Validator_Js.moduleName}else{var moduleName=app.getModuleName()}if(moduleName=="Events"){moduleName="Calendar"}return moduleName+"_"+validatorName+"_Validator_Js"},getFallBackClassName:function(validatorName){return"Vtiger_"+validatorName+"_Validator_Js"}},{field:"",error:"",validate:function(){return true},getError:function(){if(this.error!=null){return this.error}return"Validation Failed"},setError:function(errorInfo){this.error=errorInfo;return this},setElement:function(field){this.field=field;return this},getElement:function(){return this.field},getFieldValue:function(){var field=this.getElement();return jQuery.trim(field.val())}});